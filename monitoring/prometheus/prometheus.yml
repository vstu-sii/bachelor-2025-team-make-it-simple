# Глобальные настройки, которые применяются ко всем сборкам метрик,
# если не переопределены в конкретной секции 'scrape_config'.
global:
  # Интервал, с которым Prometheus будет опрашивать (скрейпить) метрики с целей.
  # В данном случае — каждые 15 секунд.
  scrape_interval: 15s

  # Время ожидания ответа от цели при сборе метрик.
  # Если цель не ответила за 10 секунд, Prometheus считает запрос неудачным.
  scrape_timeout: 10s

  # Интервал, с которым Prometheus будет оценивать правила alerting и recording.
  # В данном случае — каждые 15 секунд.
  evaluation_interval: 15s

# Секция, отвечающая за настройки алертинга.
# Указывает, куда Prometheus будет отправлять алерты.
alerting:
  # Список Alertmanager'ов, к которым Prometheus будет подключаться.
  alertmanagers:
  # Статическая конфигурация (указываем конкретные адреса).
  - static_configs:
    # Пока пустой список целей. Это означает, что алерты пока не отправляются никуда.
    # Пример: - targets: ['alertmanager:9093']
    - targets: []

    # Схема подключения (http или https).
    scheme: http

    # Таймаут для запросов к Alertmanager.
    timeout: 10s

    # Версия API Alertmanager, которую использует Prometheus.
    api_version: v1

# Секция, в которой определяются, откуда и как именно Prometheus будет собирать метрики.
scrape_configs:
# Определяем первый (и единственный в данном примере) job.
- job_name: prometheus
  # Если true, то Prometheus будет использовать временные метки (timestamps),
  # указанные в метриках цели, а не свои собственные.
  # Это полезно, если временные метки на стороне цели более точные.
  honor_timestamps: true

  # Переопределяет 'global.scrape_interval' для этого конкретного job'а.
  # В данном случае — опять 15 секунд.
  scrape_interval: 15s

  # Переопределяет 'global.scrape_timeout' для этого job'а.
  # В данном случае — 10 секунд.
  scrape_timeout: 10s

  # Путь, по которому Prometheus будет запрашивать метрики.
  # По умолчанию — '/metrics'. Здесь он явно указан.
  metrics_path: /metrics

  # Схема подключения к цели (http или https).
  scheme: http

  # Статическая конфигурация целей, с которых будут собираться метрики.
  static_configs:
  # Определяем список целей.
  - targets:
    # Единственная цель — сам Prometheus.
    # Он может собирать свои собственные метрики с адреса 'localhost:9090'.
    - localhost:9090