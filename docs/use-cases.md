# D2 - Use-case Narrative

### UC1 - Регистрация

**Описание**

Пользователь заполняет форму регистрации, пытается зарегистрироваться. Если пользователя с такой почтой ещё нет, система создаёт нового пользователя и отправляет письмо с подтверждением пользователю на почту. Пользователь нажимает на ссылку в письме, чтобы подтвердить свой аккаунт, и попадает в личный кабинет.

**Акторы**

- Незарегистрированный пользователь;
- Система.

**Начальное состояние**

- Пользователь находится на странице регистрации;
- У пользователя нет учётной записи.

**Триггер**

Пользователь решил создать учётную запись (нажал "Регистрация").

**Успешный сценарий (happy path)**

1. Пользователь заполняет форму регистрации (Имя, Email, Роль (Ученик/Учитель), Пароль, Подтверждение пароля);
2. Система проверяет корректность введённых данных (формат почты, сложность пароля, правильность подтверждения пароля);
3. Пользователь осуществляет попытку регистрации;
4. Система проверяет наличие пользователя с такой почтой;
5. Система сохраняет нового пользователя;
6. Система отправляет письмо с подтверждением регистрации на почту пользователя;
7. Система отображает пользователю инструкции по подтверждению регистрации;
8. Пользователь переходит по ссылке в письме;
9. Система обновляет статус подтверждённости пользователя;
10. Система перенаправляет пользователя на страницу личного кабинета.

**Альтернативные сценарии**

1. На шаге 2 - Введенные данные некорректны
    1. Система обнаруживает некорректные данные (некорректная почта, слабый пароль, несовпадающее подтверждение пароля);
    2. Система отображает какое поле необходимо исправить;
    3. Пользователь исправляет данные;
    4. Сценарий продолжается с повторения шага 2.
2. На шаге 4 - Пользователь с такой почтой уже существует
    1. Система обнаруживает почту уже зарегистрированного пользователя;
    2. Система сообщает об этом пользователю и предлагает поменять почту;
    3. Пользователь меняет почту;
    4. Сценарий продолжается с повторения шага 3.
3. На шаге 4 - Пользователь с такой почтой уже существует
    1. Система обнаруживает почту уже зарегистрированного пользователя;
    2. Система сообщает об этом пользователю и предлагает поменять почту;
    3. Пользователь вместо регистрации авторизируется с этой почтой;
    4. Сценарий прерван - новый пользователь не создан.

**Негативные сценарии (error handling)**

1. На шаге 3 - Ошибка сети при отправке формы
    1. Система не получила данные формы из-за сбоя сети;
    2. Система выводит пользователю сообщение о проблеме соединения;
    3. Сценарий прерван - новый пользователь не создан.

**Конечное состояние**

- При успешном, или альтернативном 1, или альтернативном 2 сценарии - новый пользователь создан в системе, учётная запись подтверждена.
- При альтернативном 3 или любом негативном сценарии - новый пользователь *не* создан, система *без* изменений.

### UC2 - Авторизация

**Описание**

Пользователь заполняет форму авторизации, пытается авторизироваться. Если пользователь с такой почтой существует и введенный пароль верный, пользователь попадает в личный кабинет.

**Акторы**

- Зарегистрированный пользователь;
- Система.

**Начальное состояние**

- Пользователь находится на странице авторизации;
- У пользователя есть учётная запись.

**Триггер**

Пользователь решил войти в учётную запись (нажал "Вход").

**Успешный сценарий (happy path)**

1. Пользователь заполняет форму авторизации (Email, Пароль);
2. Система проверяет корректность введённых данных (формат почты);
3. Пользователь осуществляет попытку входа;
4. Система проверяет наличие пользователя с такой почтой;
5. Система проверяет пароль пользователя;
6. Система перенаправляет пользователя на страницу личного кабинета.

**Альтернативные сценарии**

1. На шаге 2 - Введенные данные некорректны
    1. Система обнаруживает некорректные данные (некорректная почта);
    2. Система отображает какое поле необходимо исправить;
    3. Пользователь исправляет данные;
    4. Сценарий продолжается с повторения шага 2.
2. На шаге 4 - Пользователь с такой почтой не существует
    1. Система обнаруживает почту не зарегистрированного пользователя;
    2. Система сообщает об этом пользователю и предлагает поменять почту;
    3. Пользователь меняет почту;
    4. Сценарий продолжается с повторения шага 3.
3. На шаге 4 - Пользователь с такой почтой не существует
    1. Система обнаруживает почту не зарегистрированного пользователя;
    2. Система сообщает об этом пользователю и предлагает поменять почту;
    3. Пользователь вместо авторизации регистрируется с этой почтой;
    4. Сценарий прерван - пользователь не авторизировался.

**Негативные сценарии (error handling)**

1. На шаге 3 - Ошибка сети при отправке формы
    1. Система не получила данные формы из-за сбоя сети;
    2. Система выводит пользователю сообщение о проблеме соединения;
    3. Сценарий прерван - пользователь не авторизован.

**Конечное состояние**

- При успешном или альтернативном 1/2 сценарии - пользователь авторизирован в системе, система без изменений.
- При альтернативном 3 или негативном сценарии - пользователь *не* авторизирован в системе, система без изменений.

### UC3 - Изменение информации об интересах ученика

**Описание**

Ученик (владелец карточки) или его преподаватель открывает карточку ученика и редактирует раздел интересов ученика.

**Акторы**

- Пользователь - владелец карточки или его преподаватель;
- Система.

**Начальное состояние**

- Есть зарегистрированный ученик;
- У пользователя есть доступ к карточке ученика;
- У пользователя есть учётная запись;
- Пользователь находится на странице ученика.

**Триггер**

Пользователь решил отредактировать раздел интересов ученика (нажал "Редактировать").

**Успешный сценарий (happy path)**

1. Пользователь пишет измененнную версию интересов ученика;
2. Пользователь запрашивает сохранение новых интересов ученика;
3. Система сохраняет новые интересы ученика.

**Альтернативные сценарии**

1. На шаге 2 - Пользователь отменил изменения
    1. Пользователь отменил измениня;
    2. Система отобразила старые данные;
    3. Сценарий прерван - интересы не изменены.

**Негативные сценарии (error handling)**

1. На шаге 2 - Ошибка сети при отправке формы
    1. Система не получила данные формы из-за сбоя сети;
    2. Система выводит пользователю сообщение о проблеме соединения;
    3. Сценарий прерван - новые интересы не сохранены.

**Конечное состояние**

- При успешном сценарии - интересы ученика изменены, изменения сохранены в системе.
- При альтернативном или негативном сценарии - изменений *нет*, система в *исходном* состоянии.

### UC4 - Составление отчёта по прогрессу ученика

**Описание**

Ученик (владелец карточки) или его преподаватель открывает карточку ученика, выбирает курс, выбирает формат отчёта.

**Акторы**

- Пользователь - владелец карточки или его преподаватель;
- Система.

**Начальное состояние**

- Есть зарегистрированный ученик;
- Ученик приписан к курсу;
- У пользователя есть доступ к карточке ученика;
- У пользователя есть учётная запись;
- Пользователь находится на странице ученика.

**Триггер**

Пользователь решил посмотреть отчёт о прогрессе ученика (нажал "Прогресс").

**Успешный сценарий (happy path)**

1. Пользователь выбирает курс ученика;
2. Пользователь выбирает формат отчёта (граф усвоения тем/список пробелов);
3. Система отображает отчёт.

**Негативные сценарии (error handling)**

1. На шаге 1 - Ошибка сети при запросе курсов ученика
    1. Система не получила данные о курсах ученика из-за сбоя сети;
    2. Система выводит пользователю сообщение о проблеме соединения;
    3. Сценарий прерван - отчёт не отображён.

1. На шаге 2 - Ошибка сети при запросе отчёта
    1. Система не получила данные отчёта из-за сбоя сети;
    2. Система выводит пользователю сообщение о проблеме соединения;
    3. Сценарий прерван - отчёт не отображён.

**Конечное состояние**

- При успешном сценарии - пользователю отображён отчёт о прогрессе ученика.
- При негативном сценарии - пользователю *не* отображён отчёт о прогрессе ученика.

### UC5 - Прохождение учеником тестирования

**Описание**

Ученик выбирает курс и, если по нему пройдено входное тестирование, выбирает урок, пытается пройти по нему тест. Заполнив все вопросы, завершает тест и видит результат.

**Акторы**

- Ученик;
- Система.

**Начальное состояние**

- Ученик зарегистрирован;
- У ученика есть доступ к курсу с занятиями.

**Триггер**

Ученик решает пройти тест.

**Успешный сценарий (happy path)**

1. Ученик выбирает курс;
2. Система проверяет, что входной тест курса пройден;
3. Ученик выбирает урок;
4. Система проверяет, что тест по уроку не пройден;
5. Ученик начинает тест, нажав на соответствующую кнопку;
6. Система отображает тест;
7. Ученик отвечает на вопросы теста;
8. Ученик пробует сдать тест;
9. Система проверяет, что данные введены корректно;
10. Система обновляет информацию о знаниях ученика;
11. Система отображает результаты тестирования.

**Альтернативные сценарии**

1. На шаге 2 - Входной тест курса не пройден
    1. Система предлагает ученику пройти входной тест;
    2. Сценарий продолжается с шага 5.
2. На шаге 4 - Тест по уроку пройден
    1. Сценарий продолжается с шага 11.
3. На шаге 9 - Некорректно введены данные
    1. Система обнаруживает некорректно введенные данные;
    2. Система отмечает некорректно заполненные поля;
    4. Сценарий продолжается с повторения шага 7.

**Негативные сценарии (error handling)**

1. На шаге 1/3/6/8 - Ошибка сети при запросе данных
    1. Система не получила данные из-за сбоя сети;
    2. Система выводит пользователю сообщение о проблеме соединения;
    3. Сценарий прерван - тест не пройден.
2. На шаге 11 - Ошибка сети при запросе данных
    1. Система не получила данные из-за сбоя сети;
    2. Система выводит пользователю сообщение о проблеме соединения;

**Конечное состояние**

- При успешном сценарии или при любом альтернативном сценарии - тест пройден, результат сохранён. Ученик ознакомился с результатом.
- При негативном сценарии 2 - тест пройден, результат сохранён. Ученик *не* ознакомился с результатом.
- При негативном сценарии 1 - результат теста *не* сохранён. Ученик *не* ознакомился с результатом.

### UC6 - Формирование персональной траектории обучения

**Описание**

Репетитор выбирает курс, выбирает ученика, запрашивает генерацию персонализированной траектории обучения и получает персонализированный граф курса для ученика.

**Акторы**

- Репетитор;
- Система.

**Начальное состояние**

- Ученик зарегистрирован;
- У ученика есть доступ к составленному курсу;
- Ученик прошёл входное тестирование
- Преподаватель зарегистрирован.

**Триггер**

Преподаватель решает сгенерировать персонализированную траекторию обучения своего ученика для своего курса

**Успешный сценарий (happy path)**

1. Преподаватель выбирает курс;
2. Преподаватель выбирает ученика;
3. Преподаватель инициирует генерацию персонализированной траектории обучения;
4. Система загружает учебные материалы, перечень тем для уроков и информацию о знаниях ученика;
5. Система генерирует персонализированный граф курса;
6. Преподаватель утверждает граф курса.

**Альтернативные сценарии**

1. На шаге 6 - Преподавателя граф не устроил
    1. Система предлагает преподавателю ввести дополнительные заметки;
    2. Преподаватель вносит заметки;
    3. Сценарий продолжается с повторения шага 5.

**Негативные сценарии (error handling)**

1. На шаге 3/6 - Ошибка сети при отправке данных
    1. Система не получила данные из-за сбоя сети;
    2. Система выводит пользователю сообщение о проблеме соединения;
    3. Сценарий прерван - граф не сгенерирован.
2. На шаге 5 - Ошибка работы генеративной модели
    1. Система не получила ответ от генеративной модели в подходящей структуре;
    2. Система выводит пользователю сообщение о проблеме и просит попробовать в другой раз;
    3. Сценарий прерван - граф не сгенерирован.

**Конечное состояние**

- При успешном сценарии или при альтернативном сценарии - граф сгенерирован и сохранён в системе.
- При любом негативном сценарии - граф *не* сгенерирован и *не* сохранён в системе.

![Learning Trajectory](assets/lessons_graph.png)
Рисунок 1 - Пример графа траектории обучения

### UC7 - Генерация плана урока

**Описание**

Репетитор выбирает ученика, выбирает курс, выбирает урок. Запрашивает генерацию персонализированного плана урока и получает персонализированный план урока для ученика.

**Акторы**

- Репетитор;
- Система.

**Начальное состояние**

- Ученик зарегистрирован;
- У ученика есть доступ к составленному курсу;
- Персонализированная траектория обучения для этого ученика составлена;
- Входное тестирование на курс пройдено;
- Преподаватель зарегистрирован.

**Триггер**

Преподаватель решает сгенерировать персонализированный план конкретного урока какого-то курса.

**Успешный сценарий (happy path)**

1. Преподаватель выбирает ученика;
2. Преподаватель выбирает курс;
3. Преподаватель выбирает урок;
4. Преподаватель инициирует генерацию персонализированного плана урока;
5. Система загружает учебные материалы, информацию о знаниях и интересах ученика;
6. Система генерирует персонализированный план урока с учётом его темы;
7. Преподаватель утверждает план урока.

**Альтернативные сценарии**

1. На шаге 7 - Преподавателя план не устроил
    1. Система предлагает преподавателю ввести дополнительные заметки;
    2. Преподаватель вносит заметки;
    3. Сценарий продолжается с повторения шага 6.

**Негативные сценарии (error handling)**

1. На шаге 4/7 - Ошибка сети при отправке данных
    1. Система не получила данные из-за сбоя сети;
    2. Система выводит пользователю сообщение о проблеме соединения;
    3. Сценарий прерван - план не сгенерирован.
2. На шаге 6 - Ошибка работы генеративной модели
    1. Система не получила ответ от генеративной модели в подходящей структуре;
    2. Система выводит пользователю сообщение о проблеме и просит попробовать в другой раз;
    3. Сценарий прерван - план не сгенерирован.

**Конечное состояние**

- При успешном сценарии или при альтернативном сценарии - план сгенерирован и сохранён в системе.
- При любом негативном сценарии - план *не* сгенерирован и *не* сохранён в системе.

### UC8 - Оценка результатов урока

**Описание**

Репетитор на уроке или после урока пишет заметки об успеваемости ученика на этом уроке и утверждает оценки ии.

**Акторы**

- Репетитор;
- Система.

**Начальное состояние**

- Ученик зарегистрирован;
- Преподаватель зарегистрирован;
- Ученик зачислен на курс;
- Ученик прошёл тест по уроку;
- Преподаватель выбрал ученика;
- Преподаватель на странице урока.

**Триггер**

Преподаватель нажал "оценить" в меню урока.

**Успешный сценарий (happy path)**

1. Система загружает результаты тестирования;
2. У преподавателя отображается форма заполнения заметок по уроку;
3. Преподаватель пишет заметки;
4. Система генерирует общую оценку знаний ученика по результатам урока;
5. Преподаватель утверждает оценку знаний;
6. Преподаватель решает, требуется ли повторение.
7. Система сохраняет результат.

**Альтернативные сценарии**

1. На шаге 5 - Преподавателя не устроила оценка знаний
    1. Система предлагает преподавателю ввести свою оценку;
    2. Преподаватель вносит оценку;
    3. Сценарий продолжается со следующего шага (6).
2. На шаге 6 - Преподаватель решает, что повторение требуется
    1. Система добавляет новый урок по этой теме в образовательную траекторию
    2. Сценарий продолжается со следующего шага (7)

**Негативные сценарии (error handling)**

1. На шаге 3/5 - Ошибка сети при отправке данных
    1. Система не получила данные из-за сбоя сети;
    2. Система выводит пользователю сообщение о проблеме соединения;
    3. Сценарий прерван - оценка не проведена.
2. На шаге 4 - Ошибка работы генеративной модели
    1. Система не получила ответ от генеративной модели в подходящей структуре;
    2. Система выводит пользователю сообщение о проблеме и просит попробовать в другой раз;
    3. Сценарий прерван - оценка не проведена.

**Конечное состояние**

- При успешном сценарии или при любом альтернативном сценарии - оценка проведена и сохранена в системе.
- При любом негативном сценарии - оценка *не* проведена и *не* сохранена в системе.

### UC9 - Составление курса

**Описание**

Репетитор хочет добавить новый курс, вводит его название, вносит перечень тем для уроков и прикрепляет учебные материалы. Жмёт сохранить и курс появляется в системе.

**Акторы**

- Репетитор;
- Система.

**Начальное состояние**

- Преподаватель на странице добавления курса;
- Преподаватель зарегистрирован.

**Триггер**

Преподаватель решает добавить новый курс.

**Успешный сценарий (happy path)**

1. Преподаватель вносит название курса;
2. Система проверяет данные на корректность;
3. Преподаватель вносит перечень тем для уроков;
4. Система проверяет данные на корректность;
5. Преподаватель прикрепляет учебные материалы;
6. Система проверяет данные на корректность;
7. Система сохраняет данные в системе.

**Альтернативные сценарии**

1. На шаге 2 - Данные некорректны
    1. Система предлагает преподавателю исправить данные;
    2. Сценарий продолжается с повторения шага 1.
1. На шаге 4 - Данные некорректны
    1. Система предлагает преподавателю исправить данные;
    2. Сценарий продолжается с повторения шага 3.
1. На шаге 6 - Данные некорректны
    1. Система предлагает преподавателю исправить данные;
    2. Сценарий продолжается с повторения шага 5.

**Негативные сценарии (error handling)**

1. На шаге 7 - Ошибка сети при отправке данных
    1. Система не получила данные из-за сбоя сети;
    2. Система выводит пользователю сообщение о проблеме соединения;
    3. Сценарий прерван - курс не сохранён.

**Конечное состояние**

- При успешном сценарии или при альтернативном сценарии - курс создан и сохранён в системе.
- При любом негативном сценарии - курс *не* создан и *не* сохранён в системе.

### UC10 - Добавление ученика в курс

**Описание**

Репетитор выбирает курс, добавляет ученика, вводит почту ученика, ученик принимает приглашение на курс на своей почте.

**Акторы**

- Репетитор;
- Ученик;
- Система.

**Начальное состояние**

- Ученик зарегистрирован;
- Преподаватель зарегистрирован;
- Преподавателю известна почта ученика;
- У преподавателя есть курс;
- Преподаватель на странице курса.

**Триггер**

Преподаватель добавляет ученика (жмёт на кнопку "Пригласить ученика").

**Успешный сценарий (happy path)**

1. Преподаватель вводит почту ученика;
2. Система проверяет корректность ввода почты;
3. Система проверяет наличие ученика с такой почтой;
4. Система отправляет письмо на почту ученика;
5. Ученик кликает по ссылке в письме;
6. Система зачистляет ученика на курс;
7. Ученик перенаправляется на страницу курса.

**Альтернативные сценарии**

1. На шаге 2 - Данные некорректны
    1. Система предлагает преподавателю исправить данные;
    2. Сценарий продолжается с повторения шага 1.
2. На шаге 3 - Ученика с такой почтой не существует
    1. Система предлагает преподавателю исправить данные;
    2. Сценарий продолжается с повторения шага 1.
3. На шаге 5 - Ученик не кликает по ссылке
    1. Система не зачисляет ученика на курс;
    2. Сценарий прерывается - ученик не добавлен в курс.

**Негативные сценарии (error handling)**

1. На шаге 3/4/7 - Ошибка сети при отправке данных
    1. Система не получила данные из-за сбоя сети;
    2. Система выводит пользователю сообщение о проблеме соединения;
    3. Сценарий прерван - ученик не добавлен.

**Конечное состояние**

- При успешном сценарии или при альтернативных сценариях 1 и 2 - ученик добавлен в курс.
- При негативном сценарии или при альтернативном сценарии 3 - ученик *не* добавлен в курс.

## UML Диаграммы

1. Use Case Diagram: \
![Use Case Diagram](assets/UC-diag.png) \
Рисунок 1 - Use Case Diagram

2. Activity Diagram #1: \
![Activity Diagram](assets/register.png) \
Рисунок 2 - Activity Diagram #1

3. Activity Diagram #2: \
![Activity Diagram](assets/auth.png) \
Рисунок 3 - Activity Diagram #2

4. Activity Diagram #3: \
![Activity Diagram](assets/change_info_about_interests.png) \
Рисунок 3 - Activity Diagram #3

5. Activity Diagram #4: \
![Activity Diagram](assets/progress_report.png) \
Рисунок 4 - Activity Diagram #4

6. Activity Diagram #5: \
![Activity Diagram](assets/test_walkthrough.png) \
Рисунок 5 - Activity Diagram #5

7. Activity Diagram #6: \
![Activity Diagram](assets/personal_educ_traectory_formation.png) \
Рисунок 6 - Activity Diagram #6

8. Activity Diagram #7: \
![Activity Diagram](assets/lessons_plan_generation.png) \
Рисунок 7 - Activity Diagram #7

9. Activity Diagram #8: \
![Activity Diagram](assets/lesson_results_rate.png) \
Рисунок 8 - Activity Diagram #8

10. Activity Diagram #9: \
![Activity Diagram](assets/course_making.png) \
Рисунок 9 - Activity Diagram #9

11. Activity Diagram #10: \
![Activity Diagram](assets/add_student_to_course.png) \
Рисунок 10 - Activity Diagram #10
